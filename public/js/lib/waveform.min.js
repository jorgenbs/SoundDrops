!function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}};window.Waveform=b=function(){function b(a){if(this.redraw=c(this.redraw,this),this.container=a.container,this.canvas=a.canvas,this.data=a.data||[],this.outerColor=a.outerColor||"transparent",this.innerColor=a.innerColor||"#000000",this.interpolate=!0,a.interpolate===!1&&(this.interpolate=!1),null==this.canvas){if(!this.container)throw"Either canvas or container option must be passed";this.canvas=this.createCanvas(this.container,a.width||this.container.clientWidth,a.height||this.container.clientHeight)}this.patchCanvasForIE(this.canvas),this.context=this.canvas.getContext("2d"),this.width=parseInt(this.context.canvas.width,10),this.height=parseInt(this.context.canvas.height,10),a.data&&this.update(a)}return b.name="Waveform",b.prototype.setData=function(a){return this.data=a},b.prototype.setDataInterpolated=function(a){return this.setData(this.interpolateArray(a,this.width))},b.prototype.setDataCropped=function(a){return this.setData(this.expandArray(a,this.width))},b.prototype.update=function(a){return null!=a.interpolate&&(this.interpolate=a.interpolate),this.interpolate===!1?this.setDataCropped(a.data):this.setDataInterpolated(a.data),this.redraw()},b.prototype.redraw=function(){var a,b,c,d,e,f,g,h;for(this.clear(),this.context.fillStyle=this.innerColor,c=this.height/2,b=0,g=this.data,h=[],e=0,f=g.length;f>e;e++)a=g[e],d=this.width/this.data.length,"function"==typeof this.innerColor&&(this.context.fillStyle=this.innerColor(b/this.width,a)),this.context.clearRect(d*b,c-c*a,d,2*c*a),this.context.fillRect(d*b,c-c*a,d,2*c*a),h.push(b++);return h},b.prototype.clear=function(){return this.context.fillStyle=this.outerColor,this.context.clearRect(0,0,this.width,this.height),this.context.fillRect(0,0,this.width,this.height)},b.prototype.patchCanvasForIE=function(a){var b;return"undefined"!=typeof window.G_vmlCanvasManager?(a=window.G_vmlCanvasManager.initElement(a),b=a.getContext,a.getContext=function(){var d;return d=b.apply(a,arguments),a.getContext=b,d}):void 0},b.prototype.createCanvas=function(a,b,c){var d;return d=document.createElement("canvas"),a.appendChild(d),d.width=b,d.height=c,d},b.prototype.expandArray=function(a,b,c){var d,e,f,g;if(null==c&&(c=0),e=[],a.length>b)e=a.slice(a.length-b,a.length);else for(d=f=0,g=b-1;g>=0?g>=f:f>=g;d=g>=0?++f:--f)e[d]=a[d]||c;return e},b.prototype.linearInterpolate=function(a,b,c){return a+(b-a)*c},b.prototype.interpolateArray=function(a,b){var c,d,e,f,g,h,i;for(g=new Array,h=new Number((a.length-1)/(b-1)),g[0]=a[0],f=1;b-1>f;)i=f*h,e=new Number(Math.floor(i)).toFixed(),c=new Number(Math.ceil(i)).toFixed(),d=i-e,g[f]=this.linearInterpolate(a[e],a[c],d),f++;return g[b-1]=a[a.length-1],g},b.prototype.optionsForSyncedStream=function(a){var b,c;return null==a&&(a={}),b=!1,c=this,{whileplaying:this.redraw,whileloading:function(){var d;return b||(d=this,c.innerColor=function(b){return b<d.position/d.durationEstimate?a.playedColor||"rgba(255,  102, 0, 0.8)":b<d.bytesLoaded/d.bytesTotal?a.loadedColor||"rgba(0, 0, 0, 0.8)":a.defaultColor||"rgba(0, 0, 0, 0.4)"},b=!0),this.redraw}}},b.prototype.dataFromSoundCloudTrack=function(b){var c=this;return a.get("http://www.waveformjs.org/w",{url:b.waveform_url},function(a){return c.update({data:a})})},b}(),a=function(){var a,b,c,d,e,f,g,h,i,j;return g=function(a){var b,c,d;return d=document.createElement("script"),b=!1,d.src=a,d.async=!0,d.onload=d.onreadystatechange=function(){return b||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(b=!0,d.onload=d.onreadystatechange=null,!d||!d.parentNode)?void 0:d.parentNode.removeChild(d)},c||(c=document.getElementsByTagName("head")[0]),c.appendChild(d)},c=function(a){return encodeURIComponent(a)},e=function(d,f,h,i){var k,l;l=-1===(d||"").indexOf("?")?"?":"&",f=f||{};for(k in f)f.hasOwnProperty(k)&&(l+=c(k)+"="+c(f[k])+"&");return e="json"+ ++b,j[e]=function(a){h(a);try{delete j[e]}catch(b){}return j[e]=null},g(d+l+(i||a.callbackName||"callback")+"="+e),e},i=function(a){var b;return b=a},b=0,d=void 0,h=void 0,f=void 0,j=this,a={},{get:e,init:i}}()}.call(this);